# C4.9 sizeof运算符
`sizeof`运算符返回一条表达式或一个类型名字所占的字节数。

`sizeof`运算符满足右结合律，其所得的值是一个`size_t`类型的常量表达式。

`sizeof`运算符的运算对象有两种形式：
```cpp
sizeof (type)
sizeof expr
```

在第二种形式中，`sizeof`返回的是表达式结果类型的大小。   
与众不同的一点是，`sizeof`并不实际计算其运算对象的值。
```cpp
sizeof *p;    //p所指向类型的空间大小
```

因为`sizeof`满足右结合律并且与`*`运算符的优先级一样，所以表达式按照从右至左的顺序结合。也就是说，`sizeof *p` 等价于 `sizeof (*p)`。`sizeof`不会实际求运算对象的值，所以即使`p`是一个无效（即未初始化）的指针也不会有什么影响。在`sizeof`的运算对象中解引用一个无效指针仍然是一种安全的行为，因为指针实际上并没有被真正使用。`sizeof`不需要真的解引用指针也知道它所指对象的类型。

`sizeof`运算符的结果部分地依赖于其作用的类型：
- 对`char`或者类型为`char`的表达式执行`sizeof`运算，结果得`1`。
- 对引用类型执行`sizeof`运算得到被引用对象所占空间的大小。
- 对指针执行`sizeof`运算得到指针本身所占空间的大小。
- 对解引用指针执行`sizeof`运算得到指针指向的对象所占空间的大小，指针不需要有效。
- 对数组执行`sizeof`运算得到整个数组所占空间的大小，等价于对数组中所有的元素个执行一次`sizeof`运算并将所得结果求和。注意，`sizeof`运算不会把数组转成指针来处理。
- 对`string`对象或`vector`对象执行`sizeof`运算值返回该类型固定部分地大小，不会计算对象中的元素占用了多少空间。

因为执行`sizeof`运算能够得到整个数组的大小，所以可以用数组的大小除以单个元素的大小得到数组中元素的个数。
```cpp
constexpr size_t sz = sizeof(ia) / sizeof(*ia);
int arr[sz];
```

